import{i}from"./Q5hlEJEC.js";import{m as f,r as c,C as g,q as P}from"./DYYBa1ra.js";import{d as h}from"./CfwLjDUh.js";i.Prisma.validator()({include:{category:!0,prices:!0,images:{include:{images:!0}},stock:!0}});i.Prisma.validator()({include:{images:!0}});const M=f("product",()=>{const s=c(!1),r=c(),t=c({per_page:20,current:1,s:""}),o=async()=>{s.value=!0;const e=await $fetch("/api/product",{query:t.value});e.status=="success"&&(r.value=e.data),s.value=!1},l=e=>new Promise((a,u)=>{$fetch("/api/product",{method:"POST",body:e}).then(n=>{n.status=="success"?a(!0):u(n.message)})}),d=()=>{var a,u;const e=Math.min((a=r.value)==null?void 0:a.total_page,t.value.current+1);e!=((u=r.value)==null?void 0:u.current)&&(t.value={...t.value,current:e})},m=()=>{var a;const e=Math.max(0,t.value.current-1);e!=((a=r.value)==null?void 0:a.current)&&(t.value={...t.value,current:e})},v=e=>{var u;const a=Math.min(((u=r.value)==null?void 0:u.total_page)||0,Math.max(0,e));t.value.current!=a&&(t.value={...t.value,current:a})},p=g(()=>{var e;return(e=r.value)==null?void 0:e.data});return P(t,()=>{h(()=>{o()},500)},{deep:!0,immediate:!0}),{fetchProduct:o,saveProduct:l,nextPage:d,prevPage:m,gotoPage:v,productList:p,isLoading:s,param:r,query:t}});export{M as u};
//# sourceMappingURL=DGsS_dL1.js.map
