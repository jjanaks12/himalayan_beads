import{_ as E}from"./BIFzPT6V.js";import{_ as Q}from"./CfQIW0-U.js";import{e as F,o as a,c as d,l as k,P as J,F as $,s as Y,r as C,q as T,p as K,j as U,w as M,a as e,b as l,h as o,v as O,n as W,t as P,B as X,C as G,i as S,x as Z,Q as ee,d as z,z as N}from"./DYYBa1ra.js";import{u as D}from"./DGsS_dL1.js";import{f as te}from"./Dg8VEt95.js";import{_ as oe}from"./CDYcAvy7.js";import{F as V,E as q,a as se}from"./TKIaKC47.js";import{a as ae}from"./BHYUjHuD.js";import{u as B,_ as ne}from"./Bm_wC_HY.js";import{_ as re}from"./DGLGZj_q.js";import{u as ie}from"./DyWVWhbP.js";import"./D2hDXtRd.js";import"./Q5hlEJEC.js";import".prisma/client/index-browser";import"./CfwLjDUh.js";import"./EnSD2S2e.js";const le=F({__name:"loading",props:{row:{},column:{}},setup(w){return(u,c)=>(a(!0),d($,null,k(u.row,s=>(a(),d("tr",{class:"datatable__loading",style:J(`--delay: ${s*.1}s`)},[(a(!0),d($,null,k(u.column,n=>(a(),d("td"))),256))],4))),256))}}),de={class:"form__group"},ue={class:"form__group"},me=["value"],ce=["value"],pe={class:"text--right"},_e=F({__name:"form",props:{product:{}},emits:["update-form"],setup(w,{emit:u}){const c=w,s=u,{fetchCategory:n}=B(),{categoryList:b}=Y(B()),{saveProduct:m}=D(),_=C(),y=C(!1),x=(p,{resetForm:r})=>{y.value=!0,m({...p}).then(()=>{s("update-form"),r()}).finally(()=>{y.value=!1})},f=()=>{var p,r,h,v,g,t;(p=_.value)==null||p.resetForm(),c.product&&((h=_.value)==null||h.setFieldValue("id",(r=c.product)==null?void 0:r.id),(v=_.value)==null||v.setFieldValue("name",c.product.name),(g=_.value)==null||g.setFieldValue("description",c.product.description||""),(t=_.value)==null||t.setFieldValue("category_id",c.product.category_id||""))};return T(c,()=>{f()},{deep:!0,immediate:!0}),K(()=>{b.value.length==0&&n()}),(p,r)=>(a(),U(o(se),{class:"form","validation-schema":o(ae),onSubmit:x,ref_key:"form",ref:_},{default:M(()=>[e("div",de,[r[0]||(r[0]=e("label",{for:"pf__name"},"Name",-1)),l(o(V),{type:"text",name:"name",id:"pf__name"}),l(o(q),{name:"name",class:"input--error"})]),e("div",ue,[r[2]||(r[2]=e("label",{for:"cf__category_id"},"Category",-1)),l(o(V),{name:"category_id"},{default:M(({field:h})=>[e("select",O(h,{id:"cf__category_id"}),[r[1]||(r[1]=e("option",{value:""},"Select a parent",-1)),(a(!0),d($,null,k(o(b),v=>(a(),d($,null,[e("option",{value:v.id},P(v.name),9,me),v.predecessor.length>0?(a(!0),d($,{key:0},k(v.predecessor,g=>(a(),d("option",{value:g.id},"   "+P(g.name),9,ce))),256)):X("",!0)],64))),256))],16)]),_:1}),l(o(q),{class:"input--error",name:"category_id"})]),e("div",pe,[e("button",{type:"submit",class:W({"btn btn__primary":!0,loading:o(y)})},"Save",2)])]),_:1},8,["validation-schema"]))}}),fe={key:0,class:"pagination"},ve=["disabled"],ge={key:0},be=["onClick"],he=["disabled"],ye={key:1,class:"pagination"},xe=F({__name:"Pagination",props:{total:{},current:{},onNext:{},onPrev:{},onGoto:{},max:{default:3}},setup(w){const u=w,c=G(()=>{let s=u.max;s>u.total&&(s=u.total);let n=u.current-Math.floor(s/2);return n=Math.max(n,1),n=Math.min(n,1+u.total-s),Array.from({length:s},(b,m)=>n+m)});return(s,n)=>{const b=E;return s.total>1?(a(),d("div",fe,[e("button",{type:"button",onClick:n[0]||(n[0]=(...m)=>s.onPrev&&s.onPrev(...m)),disabled:s.current==1},[l(b,{preserveAspectRatio:"xMidYMid meet",icon:"mdiChevronLeft",size:"18"})],8,ve),e("ul",null,[(a(!0),d($,null,k(o(c),m=>(a(),d("li",null,[m==s.current?(a(),d("strong",ge,P(m),1)):(a(),d("a",{key:1,href:"#",onClick:S(_=>s.onGoto(m),["prevent"])},P(m),9,be))]))),256))]),e("button",{type:"button",onClick:n[1]||(n[1]=(...m)=>s.onNext&&s.onNext(...m)),disabled:s.current==s.total},[l(b,{preserveAspectRatio:"xMidYMid meet",icon:"mdiChevronRight",size:"18"})],8,he)])):(a(),d("div",ye,n[2]||(n[2]=[e("p",{class:"pagination__text"},"No more pages",-1)])))}}}),$e={class:"datatable__section"},Ce={class:"datatable__header"},Me={class:"datatable__header__action"},ke={action:"#",class:"search__form"},Pe={class:"form__group"},we={type:"submit"},Ae=["disabled"],Fe={class:"datatable__body"},ze={class:"sn"},Ne={class:"text--center"},Se={class:"text--right"},De={class:"datatable__footer"},Oe=F({__name:"index",setup(w){ie({title:"Products :: Himalayan Beads"});const{fetchProduct:u,nextPage:c,prevPage:s,gotoPage:n}=D(),{productList:b,isLoading:m,param:_,query:y}=Y(D()),x=C(!1),f=C(!1),p=C(null),r=C(null),h=G(()=>r.value!=null),v=async()=>{var g;x.value=!0,await $fetch(`/api/category/${(g=r.value)==null?void 0:g.id}/`,{method:"DELETE"}).then(()=>{r.value=null,u()}).finally(()=>{x.value=!1})};return T(p,()=>{p.value?f.value=!0:f.value=!1}),(g,t)=>{var L;const A=E,R=Q,H=le;return a(),d("section",$e,[e("header",Ce,[t[10]||(t[10]=e("div",{class:"datatable__header__holder"},[e("h1",null,"Product")],-1)),e("div",Me,[e("form",ke,[e("div",Pe,[t[8]||(t[8]=e("label",{for:"sf__search"},"Search product",-1)),Z(e("input",{type:"search",name:"s",id:"sf__search","onUpdate:modelValue":t[0]||(t[0]=i=>o(y).s=i),placeholder:"Search text here..."},null,512),[[ee,o(y).s]])]),e("button",we,[l(A,{preserveAspectRatio:"xMidYMid meet",icon:"mdiMagnify",size:"24"})])]),e("a",{class:"btn btn__primary btn--icon",href:"#",onClick:t[1]||(t[1]=S((...i)=>o(u)&&o(u)(...i),["prevent"])),disabled:o(m)},[l(A,{preserveAspectRatio:"xMidYMid meet",icon:"mdiReload",size:"16"})],8,Ae),e("a",{class:"btn btn__primary",href:"#",onClick:t[2]||(t[2]=S(i=>f.value=!0,["prevent"]))},t[9]||(t[9]=[e("span",{class:"prepend-icon icon-add"},null,-1),z(" Add Product ")]))])]),t[15]||(t[15]=e("div",{class:"datatable__filter"},[e("form",{action:"#",class:"search__form"})],-1)),e("div",Fe,[e("table",null,[t[13]||(t[13]=e("thead",null,[e("tr",null,[e("th"),e("th",{class:"text--left"},"Name"),e("th",null,"Created at"),e("th",{class:"text--right"},"Action")])],-1)),e("tbody",null,[o(m)?(a(),U(H,{key:1,column:4,row:3})):(a(!0),d($,{key:0},k(o(b),(i,I)=>(a(),d("tr",{key:i.id},[e("td",ze,P(I+1),1),e("td",null,[l(oe,{product:i},null,8,["product"])]),e("td",Ne,P(o(te)(i.createdAt)),1),e("td",Se,[l(R,{size:"xs",onClick:j=>p.value=i,persmission:"update_product"},{default:M(()=>[l(A,{preserveAspectRatio:"xMidYMid meet",icon:"mdiPencil",size:"16"}),t[11]||(t[11]=z(" Edit "))]),_:2},1032,["onClick"]),l(R,{size:"xs",onClick:j=>r.value=i,type:"danger",persmission:"delete_product"},{default:M(()=>[l(A,{preserveAspectRatio:"xMidYMid meet",icon:"mdiDelete",size:"16"}),t[12]||(t[12]=z(" Delete "))]),_:2},1032,["onClick"])])]))),128))])])]),e("footer",De,[l(xe,{current:o(y).current,total:((L=o(_))==null?void 0:L.total_page)||0,onNext:o(c),onPrev:o(s),onGoto:o(n)},null,8,["current","total","onNext","onPrev","onGoto"])]),l(re,{show:o(f),"onUpdate:show":t[4]||(t[4]=i=>N(f)?f.value=i:null),"onModal:close":t[5]||(t[5]=i=>p.value=null)},{default:M(()=>[l(_e,{product:o(p)||null,onUpdateForm:t[3]||(t[3]=()=>{f.value=!1,o(u)()})},null,8,["product"])]),_:1},8,["show"]),l(ne,{title:"Are you sure you want delete?",show:o(h),"onUpdate:show":t[6]||(t[6]=i=>N(h)?h.value=i:null),loading:o(x),"onUpdate:loading":t[7]||(t[7]=i=>N(x)?x.value=i:null),onCancel:()=>{r.value=null},onConfirm:v},{default:M(()=>t[14]||(t[14]=[e("p",null,"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Aliquid quo, explicabo necessitatibus laboriosam a voluptatem hic ratione eius excepturi doloremque quidem odit eaque blanditiis illo obcaecati. Dicta adipisci accusantium quidem.",-1)])),_:1},8,["show","loading","onCancel"])])}}});export{Oe as default};
//# sourceMappingURL=T_x2X1mV.js.map
