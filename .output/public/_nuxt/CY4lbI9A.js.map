{"version":3,"file":"CY4lbI9A.js","sources":["../../../../pages/(account)/register.vue"],"sourcesContent":["<script setup lang=\"ts\">\n  import { Form, Field, ErrorMessage } from 'vee-validate'\n  import { registerSchema } from '~/lib/schema/account.schema'\n\n  import Brand from '@/components/brand.vue'\n\n  useHead({\n    title: 'Register :: Himalayan Beads'\n  })\n\n  definePageMeta({\n    layout: 'simple',\n    middleware: 'auth',\n    auth: {\n      unauthenticatedOnly: true,\n      navigateAuthenticatedTo: '/dashboard'\n    }\n  })\n\n  const route = useRoute()\n  const router = useRouter()\n  const isLoading = ref(false)\n  const showPassword = ref(false)\n\n  const formSubmit = (values: any) => {\n    isLoading.value = true\n\n    $fetch('/api/auth/register', {\n      method: \"POST\",\n      body: { ...values }\n    })\n      .then((response: any) => {\n        if (response.status)\n          if (route.query.callbackUrl)\n            router.push(route.query.callbackUrl as string)\n          else\n            router.push('/dashboard')\n      })\n      .finally(() => {\n        isLoading.value = false\n      })\n  }\n</script>\n\n<template>\n  <section class=\"account__section\">\n    <div class=\"account__body\">\n      <Brand />\n      <Form class=\"account__form\" :validation-schema=\"registerSchema\" @submit=\"formSubmit\" id=\"register-form\">\n        <div class=\"account__form__text\">\n          <h1 class=\"h2\">Welcome to our site</h1>\n          <p>We are very happy to have you. I hope you would like our service</p>\n        </div>\n        <div class=\"form__group\">\n          <label for=\"rf__email\">Email</label>\n          <Field type=\"email\" name=\"email\" id=\"rf__email\" />\n          <ErrorMessage class=\"input--error\" name=\"email\" />\n        </div>\n        <div class=\"form__group\">\n          <label for=\"rf__password\">Password</label>\n          <Field :type=\"showPassword ? 'text' : 'password'\" name=\"password\" id=\"rf__password\" />\n          <ErrorMessage class=\"input--error\" name=\"password\" />\n          <a href=\"#\" @click.prevent=\"showPassword = !showPassword\" class=\"btn btn--xs btn__info btn--icon\" tabindex=\"-1\">\n            <MdiIcon preserveAspectRatio=\"xMidYMid meet\" icon=\"mdiEyeOutline\" size=\"16\" v-if=\"showPassword\" />\n            <MdiIcon preserveAspectRatio=\"xMidYMid meet\" icon=\"mdiEyeOffOutline\" size=\"16\" v-else />\n          </a>\n        </div>\n        <div class=\"form__group\">\n          <label for=\"rf__confirm_password\">Confirm Password</label>\n          <Field type=\"password\" name=\"password_confirmation\" id=\"rf__confirm_password\" />\n          <ErrorMessage class=\"input--error\" name=\"password_confirmation\" />\n        </div>\n        <div class=\"text--right\">\n          <button type=\"submit\" :class=\"{ 'btn btn__primary': true, 'loading': isLoading }\">Sign up</button>\n        </div>\n      </Form>\n      <div class=\"account__meta\">\n        <p>Already has an account? <NuxtLink to=\"/login\">signin</NuxtLink>\n        </p>\n      </div>\n    </div>\n  </section>\n</template>"],"names":["useHead","route","useRoute","router","useRouter","isLoading","ref","showPassword","formSubmit","values","response"],"mappings":"okBAMUA,EAAA,CACN,MAAO,6BAAA,CACR,EAWD,MAAMC,EAAQC,IACRC,EAASC,IACTC,EAAYC,EAAI,EAAK,EACrBC,EAAeD,EAAI,EAAK,EAExBE,EAAcC,GAAgB,CAClCJ,EAAU,MAAQ,GAElB,OAAO,qBAAsB,CAC3B,OAAQ,OACR,KAAM,CAAE,GAAGI,CAAO,CAAA,CACnB,EACE,KAAMC,GAAkB,CACnBA,EAAS,SACPT,EAAM,MAAM,YACPE,EAAA,KAAKF,EAAM,MAAM,WAAqB,EAE7CE,EAAO,KAAK,YAAY,EAAA,CAC7B,EACA,QAAQ,IAAM,CACbE,EAAU,MAAQ,EAAA,CACnB,CAAA"}