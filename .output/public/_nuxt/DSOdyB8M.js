import{e as U,s as H,r as y,j as T,o as l,k as L,w as x,h as n,l as D,a as e,b as m,m as B,c as i,p as q,F as w,n as R,q as g,t as f,v as j,x as I,d as C,y as S}from"./DT-9z51a.js";import{f as M}from"./Dg8VEt95.js";import{u as A,_ as G}from"./Mwe6TfDu.js";import{_ as J}from"./Be_qjAZs.js";import{c as K,b as P,F,E as V,a as O}from"./CA_3KXji.js";import{u as Q}from"./CuYQBnf8.js";import{u as W}from"./DZBDTIYo.js";import"./Q5hlEJEC.js";import".prisma/client/index-browser";import"./CfwLjDUh.js";const X=K({name:P().required().label("Name"),description:P().label("Description")}),Y={class:"form__group"},Z={class:"form__group"},ee={class:"form__group"},te={class:"custom__file"},se={class:"custom__file__text"},ne={class:"custom__file__list"},oe={class:"custom__file__list__item"},le=["src","alt"],ae=["onClick"],ie={key:1,class:"custom__file__list__item"},re={class:"form__group"},de=["value"],ue={class:"text--right"},ce=U({__name:"form",props:{category:{}},emits:["update-form"],setup(N,{emit:E}){const u=N,c=E,{saveCategory:v}=A(),{categoryList:h}=H(A()),{files:d,handleFileInput:_}=Q(),p=y(),b=y(!1),$=(t,{resetForm:o})=>{b.value=!0,v({...t,files:d.value}).then(()=>{c("update-form"),o()}).finally(()=>{b.value=!1})},s=()=>{var t,o,r,a,k;(t=p.value)==null||t.resetForm(),u.category&&((o=p.value)==null||o.setFieldValue("id",u.category.id),(r=p.value)==null||r.setFieldValue("name",u.category.name),(a=p.value)==null||a.setFieldValue("description",u.category.description||""),(k=p.value)==null||k.setFieldValue("parent_category",u.category.parent_id||""),d.value=[])};return T(u,()=>{s()},{deep:!0,immediate:!0}),(t,o)=>(l(),L(n(O),{class:"category__form",action:"#","validation-schema":n(X),onSubmit:$,ref_key:"form",ref:p},{default:x(()=>[u.category?(l(),L(n(F),{key:0,type:"hidden",name:"id"})):D("",!0),e("div",Y,[o[1]||(o[1]=e("label",{for:"cf__name"},"Name",-1)),m(n(F),{type:"text",name:"name",id:"cf__name",autocomplete:"name"}),m(n(V),{class:"input--error",name:"name"})]),e("div",Z,[o[2]||(o[2]=e("label",{for:"cf__description"},"Description",-1)),m(n(F),{name:"description"},{default:x(({field:r})=>[e("textarea",B(r,{id:"cf__description"}),null,16)]),_:1}),m(n(V),{class:"input--error",name:"description"})]),e("div",ee,[e("label",te,[e("input",{type:"file",onChange:o[0]||(o[0]=(...r)=>n(_)&&n(_)(...r)),name:"file",accept:"image/*"},null,32),e("div",se,[e("ol",ne,[n(d).length>0?(l(!0),i(w,{key:0},q(n(d),(r,a)=>(l(),i("li",oe,[e("img",{src:r.content,alt:r.name},null,8,le),e("a",{href:"#",onClick:g(k=>n(d).splice(a,1),["prevent"])},o[3]||(o[3]=[e("span",{class:"icon-add"},null,-1)]),8,ae)]))),256)):(l(),i("span",ie,o[4]||(o[4]=[e("strong",null,"Select a file",-1)])))])])])]),e("div",re,[o[6]||(o[6]=e("label",{for:"cf__parent_category"},"Parent category",-1)),m(n(F),{name:"parent_category"},{default:x(({field:r})=>[e("select",B(r,{id:"cf__parent_category"}),[o[5]||(o[5]=e("option",{value:""},"Select a parent",-1)),(l(!0),i(w,null,q(n(h),a=>(l(),i("option",{value:a.id},f(a.name),9,de))),256))],16)]),_:1}),m(n(V),{class:"input--error",name:"parent_category"})]),e("div",ue,[e("button",{type:"submit",class:R({"btn btn__primary":!0,loading:n(b)})},"Save",2)])]),_:1},8,["validation-schema"]))}}),_e={class:"datatable__section"},me={class:"datatable__header"},pe={class:"datatable__header__action"},fe={class:"datatable__body"},ve={class:"sn"},he={class:"wrap"},be={key:0,class:"image"},ge=["src","alt"],ye={class:"holder"},$e={class:"title"},ke={class:"text--center nowrap"},Ce={class:"text--right nowrap"},xe=["onClick"],we=["onClick"],Fe=["onClick"],De={key:0,class:"icon-caret-d"},qe={key:1,class:"icon-caret-t"},Ae={key:0},Ee={colspan:"4",class:"no--spacing"},Se={class:"subtable"},Ve={class:"sn"},Ne={class:"text--center"},Le={class:"text--right"},Be=["onClick"],Me=["onClick"],Ke=U({__name:"category",setup(N){W({title:"Category :: Himalayan Beads"});const{categoryList:E}=H(A()),{fetchCategory:u}=A(),c=y(!1),v=y(!1),h=y({}),d=y(null),_=y(null),p=()=>{var $;v.value=!0,$fetch(`/api/category/${($=_.value)==null?void 0:$.id}/`,{method:"DELETE"}).then(()=>{_.value=null,u()}).finally(()=>{v.value=!1})},b=j(()=>_.value!=null);return T(d,()=>{d.value?c.value=!0:c.value=!1}),I(()=>{u()}),($,s)=>(l(),i("section",_e,[e("header",me,[s[7]||(s[7]=e("div",{class:"datatable__header__holder"},[e("h1",null,"Product category")],-1)),e("div",pe,[e("a",{class:"btn btn__primary",href:"#",onClick:s[0]||(s[0]=g(t=>c.value=!0,["prevent"]))},s[6]||(s[6]=[e("span",{class:"prepend-icon icon-add"},null,-1),C(" Add Category ")]))])]),e("div",fe,[e("table",null,[s[12]||(s[12]=e("thead",null,[e("tr",null,[e("th"),e("th",{class:"text--left"},"Name"),e("th",null,"Created at"),e("th",{class:"text--right"},"Action")])],-1)),e("tbody",null,[(l(!0),i(w,null,q(n(E),(t,o)=>{var r;return l(),i(w,{key:t.id},[e("tr",null,[e("td",ve,f(o+1),1),e("td",null,[e("div",he,[t.image?(l(),i("figure",be,[e("img",{src:((r=t.image)==null?void 0:r.url)||"",alt:t.name},null,8,ge)])):D("",!0),e("div",ye,[e("strong",$e,f(t.name),1)])])]),e("td",ke,f(n(M)(t.createdAt)),1),e("td",Ce,[e("a",{class:"btn btn--xs btn__info",href:"#",onClick:g(a=>d.value=t,["prevent"])},s[8]||(s[8]=[e("span",{class:"prepend-icon icon-edit"},null,-1),C(" Edit ")]),8,xe),e("a",{class:"btn btn--xs btn__danger",href:"#",onClick:g(a=>_.value=t,["prevent"])},s[9]||(s[9]=[e("span",{class:"prepend-icon icon-trash"},null,-1),C(" Delete ")]),8,we),(t==null?void 0:t.predecessor.length)>0?(l(),i("a",{key:0,href:"#",class:"btn btn--xs btn__primary btn--outline",onClick:g(a=>n(h)[t.id]=n(h)[t.id]?!n(h)[t.id]:!0,["prevent"])},[n(h)[t.id]?(l(),i("span",De)):(l(),i("span",qe))],8,Fe)):D("",!0)])]),(t==null?void 0:t.predecessor.length)>0&&n(h)[t.id]?(l(),i("tr",Ae,[e("td",Ee,[e("table",Se,[e("tbody",null,[(l(!0),i(w,null,q(t.predecessor,(a,k)=>(l(),i("tr",null,[e("td",Ve,f(o+1)+"."+f(k+1),1),e("td",Ne,f(a.name),1),e("td",null,f(n(M)(a.createdAt)),1),e("td",Le,[e("a",{class:"btn btn--xs btn__info",href:"#",onClick:g(z=>d.value=a,["prevent"])},s[10]||(s[10]=[e("span",{class:"prepend-icon icon-edit"},null,-1),C(" Edit ")]),8,Be),e("a",{class:"btn btn--xs btn__danger",href:"#",onClick:g(z=>_.value=a,["prevent"])},s[11]||(s[11]=[e("span",{class:"prepend-icon icon-trash"},null,-1),C(" Delete ")]),8,Me)])]))),256))])])])])):D("",!0)],64)}),128))])])]),m(J,{show:n(c),"onUpdate:show":s[2]||(s[2]=t=>S(c)?c.value=t:null),"onModal:close":s[3]||(s[3]=t=>d.value=null)},{default:x(()=>[m(ce,{category:n(d)||null,onUpdateForm:s[1]||(s[1]=()=>{c.value=!1,n(u)()})},null,8,["category"])]),_:1},8,["show"]),m(G,{title:"Are you sure you want delete?",show:n(b),"onUpdate:show":s[4]||(s[4]=t=>S(b)?b.value=t:null),loading:n(v),"onUpdate:loading":s[5]||(s[5]=t=>S(v)?v.value=t:null),onCancel:()=>{_.value=null},onConfirm:p},{default:x(()=>s[13]||(s[13]=[e("p",null,"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Aliquid quo, explicabo necessitatibus laboriosam a voluptatem hic ratione eius excepturi doloremque quidem odit eaque blanditiis illo obcaecati. Dicta adipisci accusantium quidem.",-1)])),_:1},8,["show","loading","onCancel"])]))}});export{Ke as default};
//# sourceMappingURL=DSOdyB8M.js.map
