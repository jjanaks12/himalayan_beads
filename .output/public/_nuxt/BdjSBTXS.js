import{e as U,s as H,r as $,j as T,o,k as L,w as x,h as n,l as D,a as e,b as m,m as B,c as i,p as q,F as w,n as R,q as g,t as f,v as j,x as I,d as y,y as S}from"./CSilbV6M.js";import{f as M}from"./Dg8VEt95.js";import{u as A,_ as G}from"./BQvljroX.js";import{_ as J}from"./Bo4FUJye.js";import{c as K,b as P,F,E as V,a as O}from"./CPNI6MEA.js";import{u as Q}from"./Niu-L1hA.js";import{u as W}from"./CGNSDsaI.js";import"./CfwLjDUh.js";const X=K({name:P().required().label("Name"),description:P().label("Description")}),Y={class:"form__group"},Z={class:"form__group"},ee={class:"form__group"},te={class:"custom__file"},se={class:"custom__file__text"},ne={class:"custom__file__list"},le={class:"custom__file__list__item"},oe=["src","alt"],ae=["onClick"],ie={key:1,class:"custom__file__list__item"},re={class:"form__group"},de=["value"],ue={class:"text--right"},ce=U({__name:"form",props:{category:{}},emits:["update-form"],setup(N,{emit:E}){const u=N,c=E,{saveCategory:v}=A(),{categoryList:h}=H(A()),{files:d,handleFileInput:_}=Q(),p=$(),b=$(!1),k=(t,{resetForm:l})=>{b.value=!0,v({...t,files:d.value}).then(()=>{c("update-form"),l()}).finally(()=>{b.value=!1})},s=()=>{var t,l,r,a,C;(t=p.value)==null||t.resetForm(),u.category&&((l=p.value)==null||l.setFieldValue("id",u.category.id),(r=p.value)==null||r.setFieldValue("name",u.category.name),(a=p.value)==null||a.setFieldValue("description",u.category.description||""),(C=p.value)==null||C.setFieldValue("parent_category",u.category.parent_id||""),d.value=[])};return T(u,()=>{s()},{deep:!0,immediate:!0}),(t,l)=>(o(),L(n(O),{class:"category__form",action:"#","validation-schema":n(X),onSubmit:k,ref_key:"form",ref:p},{default:x(()=>[u.category?(o(),L(n(F),{key:0,type:"hidden",name:"id"})):D("",!0),e("div",Y,[l[1]||(l[1]=e("label",{for:"cf__name"},"Name",-1)),m(n(F),{type:"text",name:"name",id:"cf__name",autocomplete:"name"}),m(n(V),{class:"input--error",name:"name"})]),e("div",Z,[l[2]||(l[2]=e("label",{for:"cf__description"},"Description",-1)),m(n(F),{name:"description"},{default:x(({field:r})=>[e("textarea",B(r,{id:"cf__description"}),null,16)]),_:1}),m(n(V),{class:"input--error",name:"description"})]),e("div",ee,[e("label",te,[e("input",{type:"file",onChange:l[0]||(l[0]=(...r)=>n(_)&&n(_)(...r)),name:"file",accept:"image/*"},null,32),e("div",se,[e("ol",ne,[n(d).length>0?(o(!0),i(w,{key:0},q(n(d),(r,a)=>(o(),i("li",le,[e("img",{src:r.content,alt:r.name},null,8,oe),e("a",{href:"#",onClick:g(C=>n(d).splice(a,1),["prevent"])},l[3]||(l[3]=[e("span",{class:"icon-add"},null,-1)]),8,ae)]))),256)):(o(),i("span",ie,l[4]||(l[4]=[e("strong",null,"Select a file",-1)])))])])])]),e("div",re,[l[6]||(l[6]=e("label",{for:"cf__parent_category"},"Parent category",-1)),m(n(F),{name:"parent_category"},{default:x(({field:r})=>[e("select",B(r,{id:"cf__parent_category"}),[l[5]||(l[5]=e("option",{value:""},"Select a parent",-1)),(o(!0),i(w,null,q(n(h),a=>(o(),i("option",{value:a.id},f(a.name),9,de))),256))],16)]),_:1}),m(n(V),{class:"input--error",name:"parent_category"})]),e("div",ue,[e("button",{type:"submit",class:R({"btn btn__primary":!0,loading:n(b)})},"Save",2)])]),_:1},8,["validation-schema"]))}}),_e={class:"datatable__section"},me={class:"datatable__header"},pe={class:"datatable__header__action"},fe={class:"datatable__body"},ve={class:"sn"},he={class:"wrap"},be={key:0,class:"image"},ge=["src","alt"],$e={class:"holder"},ke={class:"title"},Ce={class:"text--center nowrap"},ye={class:"text--right nowrap"},xe=["onClick"],we=["onClick"],Fe=["onClick"],De={key:0,class:"icon-caret-d"},qe={key:1,class:"icon-caret-t"},Ae={key:0},Ee={colspan:"4",class:"no--spacing"},Se={class:"subtable"},Ve={class:"sn"},Ne={class:"text--center"},Le={class:"text--right"},Be=["onClick"],Me=["onClick"],Ge=U({__name:"category",setup(N){W({title:"Category :: Himalayan Beads"});const{categoryList:E}=H(A()),{fetchCategory:u}=A(),c=$(!1),v=$(!1),h=$({}),d=$(null),_=$(null),p=()=>{var k;v.value=!0,$fetch(`/api/category/${(k=_.value)==null?void 0:k.id}/`,{method:"DELETE"}).then(()=>{_.value=null,u()}).finally(()=>{v.value=!1})},b=j(()=>_.value!=null);return T(d,()=>{d.value?c.value=!0:c.value=!1}),I(()=>{u()}),(k,s)=>(o(),i("section",_e,[e("header",me,[s[7]||(s[7]=e("div",{class:"datatable__header__holder"},[e("h1",null,"Product category")],-1)),e("div",pe,[e("a",{class:"btn btn__primary",href:"#",onClick:s[0]||(s[0]=g(t=>c.value=!0,["prevent"]))},s[6]||(s[6]=[e("span",{class:"prepend-icon icon-add"},null,-1),y(" Add Category ")]))])]),e("div",fe,[e("table",null,[s[12]||(s[12]=e("thead",null,[e("tr",null,[e("th"),e("th",{class:"text--left"},"Name"),e("th",null,"Created at"),e("th",{class:"text--right"},"Action")])],-1)),e("tbody",null,[(o(!0),i(w,null,q(n(E),(t,l)=>{var r;return o(),i(w,{key:t.id},[e("tr",null,[e("td",ve,f(l+1),1),e("td",null,[e("div",he,[t.image?(o(),i("figure",be,[e("img",{src:((r=t.image)==null?void 0:r.url)||"",alt:t.name},null,8,ge)])):D("",!0),e("div",$e,[e("strong",ke,f(t.name),1)])])]),e("td",Ce,f(n(M)(t.createdAt)),1),e("td",ye,[e("a",{class:"btn btn--xs btn__info",href:"#",onClick:g(a=>d.value=t,["prevent"])},s[8]||(s[8]=[e("span",{class:"prepend-icon icon-edit"},null,-1),y(" Edit ")]),8,xe),e("a",{class:"btn btn--xs btn__danger",href:"#",onClick:g(a=>_.value=t,["prevent"])},s[9]||(s[9]=[e("span",{class:"prepend-icon icon-trash"},null,-1),y(" Delete ")]),8,we),(t==null?void 0:t.predecessor.length)>0?(o(),i("a",{key:0,href:"#",class:"btn btn--xs btn__primary btn--outline",onClick:g(a=>n(h)[t.id]=n(h)[t.id]?!n(h)[t.id]:!0,["prevent"])},[n(h)[t.id]?(o(),i("span",De)):(o(),i("span",qe))],8,Fe)):D("",!0)])]),(t==null?void 0:t.predecessor.length)>0&&n(h)[t==null?void 0:t.id]?(o(),i("tr",Ae,[e("td",Ee,[e("table",Se,[e("tbody",null,[(o(!0),i(w,null,q(t.predecessor,(a,C)=>(o(),i("tr",null,[e("td",Ve,f(l+1)+"."+f(C+1),1),e("td",Ne,f(a.name),1),e("td",null,f(n(M)(a.createdAt)),1),e("td",Le,[e("a",{class:"btn btn--xs btn__info",href:"#",onClick:g(z=>d.value=a,["prevent"])},s[10]||(s[10]=[e("span",{class:"prepend-icon icon-edit"},null,-1),y(" Edit ")]),8,Be),e("a",{class:"btn btn--xs btn__danger",href:"#",onClick:g(z=>_.value=a,["prevent"])},s[11]||(s[11]=[e("span",{class:"prepend-icon icon-trash"},null,-1),y(" Delete ")]),8,Me)])]))),256))])])])])):D("",!0)],64)}),128))])])]),m(J,{show:n(c),"onUpdate:show":s[2]||(s[2]=t=>S(c)?c.value=t:null),"onModal:close":s[3]||(s[3]=t=>d.value=null)},{default:x(()=>[m(ce,{category:n(d)||null,onUpdateForm:s[1]||(s[1]=()=>{c.value=!1,n(u)()})},null,8,["category"])]),_:1},8,["show"]),m(G,{title:"Are you sure you want delete?",show:n(b),"onUpdate:show":s[4]||(s[4]=t=>S(b)?b.value=t:null),loading:n(v),"onUpdate:loading":s[5]||(s[5]=t=>S(v)?v.value=t:null),onCancel:()=>{_.value=null},onConfirm:p},{default:x(()=>s[13]||(s[13]=[e("p",null,"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Aliquid quo, explicabo necessitatibus laboriosam a voluptatem hic ratione eius excepturi doloremque quidem odit eaque blanditiis illo obcaecati. Dicta adipisci accusantium quidem.",-1)])),_:1},8,["show","loading","onCancel"])]))}});export{Ge as default};
//# sourceMappingURL=BdjSBTXS.js.map
