import{_ as z}from"./D2NsX_gF.js";import{L as T,r as f,e as A,s as N,j as B,x as M,o as p,k as U,w as $,a as e,b as d,h as o,m as H,c as _,p as S,F as P,n as R,t as w,l as j,v as I,q as C,d as F,y as k}from"./CSilbV6M.js";import{f as O}from"./Dg8VEt95.js";import{_ as G}from"./BMLEdNKW.js";import{F as V,E as q,a as J}from"./CPNI6MEA.js";import{a as K}from"./CCuQRdTt.js";import{u as E,_ as Q}from"./BQvljroX.js";import{_ as W}from"./Bo4FUJye.js";import{u as X}from"./CGNSDsaI.js";import"./g7Sf15m9.js";import"./CfwLjDUh.js";const D=T("product",()=>{const b=f([]);return{fetchProduct:async()=>{const a=await $fetch("/api/product");a.status=="success"&&(b.value=a.data)},saveProduct:a=>new Promise((n,l)=>{$fetch("/api/product",{method:"POST",body:a}).then(r=>{r.status=="success"?n(!0):l(r.message)})}),productList:b}}),Y={class:"form__group"},Z={class:"form__group"},ee=["value"],te=["value"],se={class:"text--right"},oe=A({__name:"form",props:{product:{}},emits:["update-form"],setup(b,{emit:v}){const u=b,a=v,{fetchCategory:n}=E(),{categoryList:l}=N(E()),{saveProduct:r}=D(),i=f(),g=f(!1),y=(m,{resetForm:s})=>{g.value=!0,r({...m}).then(()=>{a("update-form"),s()}).finally(()=>{g.value=!1})},t=()=>{var m,s,h,c,x,L;(m=i.value)==null||m.resetForm(),u.product&&((h=i.value)==null||h.setFieldValue("id",(s=u.product)==null?void 0:s.id),(c=i.value)==null||c.setFieldValue("name",u.product.name),(x=i.value)==null||x.setFieldValue("description",u.product.description||""),(L=i.value)==null||L.setFieldValue("category_id",u.product.category_id||""))};return B(u,()=>{t()},{deep:!0,immediate:!0}),M(()=>{l.value.length==0&&n()}),(m,s)=>(p(),U(o(J),{class:"form","validation-schema":o(K),onSubmit:y,ref_key:"form",ref:i},{default:$(()=>[e("div",Y,[s[0]||(s[0]=e("label",{for:"pf__name"},"Name",-1)),d(o(V),{type:"text",name:"name",id:"pf__name"}),d(o(q),{name:"name",class:"input--error"})]),e("div",Z,[s[2]||(s[2]=e("label",{for:"cf__category_id"},"Category",-1)),d(o(V),{name:"category_id"},{default:$(({field:h})=>[e("select",H(h,{id:"cf__category_id"}),[s[1]||(s[1]=e("option",{value:""},"Select a parent",-1)),(p(!0),_(P,null,S(o(l),c=>(p(),_(P,null,[e("option",{value:c.id},w(c.name),9,ee),c.predecessor.length>0?(p(!0),_(P,{key:0},S(c.predecessor,x=>(p(),_("option",{value:x.id},"   "+w(x.name),9,te))),256)):j("",!0)],64))),256))],16)]),_:1}),d(o(q),{class:"input--error",name:"category_id"})]),e("div",se,[e("button",{type:"submit",class:R({"btn btn__primary":!0,loading:o(g)})},"Save",2)])]),_:1},8,["validation-schema"]))}}),ae={class:"datatable__section"},ne={class:"datatable__header"},le={class:"datatable__header__action"},re={class:"datatable__body"},ie={class:"sn"},de={class:"text--center"},ue={class:"text--right"},ce=["onClick"],me=["onClick"],we=A({__name:"index",setup(b){X({title:"Products :: Himalayan Beads"});const{fetchProduct:v}=D(),{productList:u}=N(D()),a=f(!1),n=f(!1),l=f(null),r=f(null),i=I(()=>r.value!=null),g=async()=>{var y;a.value=!0,await $fetch(`/api/category/${(y=r.value)==null?void 0:y.id}/`,{method:"DELETE"}).then(()=>{r.value=null,v()}).finally(()=>{a.value=!1})};return B(l,()=>{l.value?n.value=!0:n.value=!1}),M(()=>{v()}),(y,t)=>{const m=z;return p(),_("section",ae,[e("header",ne,[t[7]||(t[7]=e("div",{class:"datatable__header__holder"},[e("h1",null,"Product")],-1)),e("div",le,[e("a",{class:"btn btn__primary",href:"#",onClick:t[0]||(t[0]=C(s=>n.value=!0,["prevent"]))},t[6]||(t[6]=[e("span",{class:"prepend-icon icon-add"},null,-1),F(" Add Product ")]))])]),t[12]||(t[12]=e("div",{class:"datatable__filter"},[e("form",{action:"#",class:"search__form"})],-1)),e("div",re,[e("table",null,[t[10]||(t[10]=e("thead",null,[e("tr",null,[e("th"),e("th",{class:"text--left"},"Name"),e("th",null,"Created at"),e("th",{class:"text--right"},"Action")])],-1)),e("tbody",null,[(p(!0),_(P,null,S(o(u),(s,h)=>(p(),_("tr",{key:s.id},[e("td",ie,w(h+1),1),e("td",null,[d(G,{product:s},null,8,["product"])]),e("td",de,w(o(O)(s.createdAt)),1),e("td",ue,[e("a",{class:"btn btn--xs btn__info",href:"#",onClick:C(c=>l.value=s,["prevent"])},[d(m,{icon:"mdiPencil",size:"16"}),t[8]||(t[8]=F(" Edit "))],8,ce),e("a",{class:"btn btn--xs btn__danger",href:"#",onClick:C(c=>r.value=s,["prevent"])},[d(m,{icon:"mdiDelete",size:"16"}),t[9]||(t[9]=F(" Delete "))],8,me)])]))),128))])])]),d(W,{show:o(n),"onUpdate:show":t[2]||(t[2]=s=>k(n)?n.value=s:null),"onModal:close":t[3]||(t[3]=s=>l.value=null)},{default:$(()=>[d(oe,{product:o(l)||null,onUpdateForm:t[1]||(t[1]=()=>{n.value=!1,o(v)()})},null,8,["product"])]),_:1},8,["show"]),d(Q,{title:"Are you sure you want delete?",show:o(i),"onUpdate:show":t[4]||(t[4]=s=>k(i)?i.value=s:null),loading:o(a),"onUpdate:loading":t[5]||(t[5]=s=>k(a)?a.value=s:null),onCancel:()=>{r.value=null},onConfirm:g},{default:$(()=>t[11]||(t[11]=[e("p",null,"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Aliquid quo, explicabo necessitatibus laboriosam a voluptatem hic ratione eius excepturi doloremque quidem odit eaque blanditiis illo obcaecati. Dicta adipisci accusantium quidem.",-1)])),_:1},8,["show","loading","onCancel"])])}}});export{we as default};
//# sourceMappingURL=lNA-DLD7.js.map
