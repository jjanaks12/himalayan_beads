{"version":3,"file":"Mwe6TfDu.js","sources":["../../../../store/productCategory.ts","../../../../components/Alert.vue"],"sourcesContent":["import { Prisma, type Category } from '@prisma/client'\nimport { defineStore } from 'pinia'\n\nconst categoryWithPredecessor = Prisma.validator<Prisma.CategoryDefaultArgs>()({\n  include: {\n    predecessor: true,\n    image: true\n  }\n})\ntype CategoryWithPredecessor = Prisma.CategoryGetPayload<typeof categoryWithPredecessor>\n\nexport const useProductCategoryStore = defineStore('product_category', () => {\n  const categoryList = ref<CategoryWithPredecessor[]>([])\n\n  const fetchCategory = async () => {\n    $fetch<APIResponse<CategoryWithPredecessor[]>>('/api/category')\n      .then(response => {\n        if (response.status == 'success')\n          categoryList.value = response.data\n      })\n  }\n\n  const saveCategory = (values: any) => new Promise((resolve, reject) => {\n    {\n      $fetch<APIResponse<Category>>('/api/category', {\n        method: 'POST',\n        body: values\n      })\n        .then((a) => {\n          if (a.status == 'success')\n            resolve(true)\n          else\n            reject(a.message)\n        })\n    }\n  })\n\n  return { fetchCategory, saveCategory, categoryList }\n})\n","<script setup lang=\"ts\">\n    interface AlertProps {\n        title: string,\n        subTitle?: string | null\n        confirmText?: string\n        onConfirm?: Function\n        cancelText?: string\n        onCancel?: Function\n    }\n\n    const props = withDefaults(defineProps<AlertProps>(), {\n        title: '',\n        subTitle: null,\n        confirmText: 'Ok!',\n        onConfirm: () => { },\n        cancelText: 'No!',\n        onCancel: () => { },\n    })\n\n    const loading = defineModel('loading', {\n        type: Boolean,\n        default: false\n    })\n    const show = defineModel('show', {\n        type: Boolean,\n        default: false\n    })\n\n    const alert = ref()\n\n    const init = () => {\n        if (show.value) {\n            document.body.style.overflow = 'hidden'\n            setTimeout(() => {\n                document.addEventListener('click', clickOnOutside)\n            }, 500)\n        } else {\n            document.body.style.overflow = ''\n            document.removeEventListener('click', clickOnOutside)\n        }\n    }\n\n    const closeAlert = () => {\n        show.value = false\n\n        props.onCancel()\n    }\n\n    const clickOnOutside = (event: Event) => {\n        if (show.value) {\n            event.preventDefault()\n            event.stopPropagation()\n\n            if (!alert.value.contains(event.target)) {\n                show.value = false\n                props.onCancel()\n            }\n        }\n    }\n\n    const confirming = () => {\n        props.onConfirm()\n    }\n\n    onMounted(() => {\n        init()\n    })\n\n    watch(show, () => {\n        init()\n    })\n</script>\n\n<template>\n    <Teleport to=\"body\">\n        <div :class=\"{ 'alert': true, 'alert--show': show }\">\n            <div class=\"alert__holder\" ref=\"alert\">\n                <a href=\"#\" class=\"alert__close\" @click.prevent=\"closeAlert\"><span class=\"icon-add\"></span></a>\n                <div class=\"alert__icon\">\n                    <span class=\"icon-question-c\"></span>\n                </div>\n                <div class=\"alert__message\">\n                    <strong class=\"title\">{{ title }}</strong>\n                    <em class=\"subtitle\" v-if=\"subTitle\">{{ subTitle }}</em>\n                    <div class=\"text\">\n                        <slot />\n                    </div>\n                </div>\n                <div class=\"alert__action\">\n                    <button type=\"button\" class=\"btn btn__primary btn--outline\" @click=\"closeAlert\">\n                        {{ cancelText }}\n                    </button>\n                    <button type=\"button\" :class=\"{ 'btn btn__primary': true, 'loading': loading }\" @click=\"confirming\">\n                        {{ confirmText }}\n                    </button>\n                </div>\n            </div>\n        </div>\n    </Teleport>\n</template>"],"names":["Prisma","useProductCategoryStore","defineStore","categoryList","ref","response","values","resolve","reject","props","__props","loading","_useModel","show","alert","init","clickOnOutside","closeAlert","event","confirming","onMounted","watch"],"mappings":"oLAGgCA,EAAO,OAAA,UAAA,EAAwC,CAC7E,QAAS,CACP,YAAa,GACb,MAAO,EACT,CACF,CAAC,EAGY,MAAAC,EAA0BC,EAAY,mBAAoB,IAAM,CACrE,MAAAC,EAAeC,EAA+B,CAAA,CAAE,EAyB/C,MAAA,CAAE,cAvBa,SAAY,CACe,OAAA,eAAe,EAC3D,KAAiBC,GAAA,CACZA,EAAS,QAAU,YACrBF,EAAa,MAAQE,EAAS,KAAA,CACjC,CAAA,EAkBmB,aAfFC,GAAgB,IAAI,QAAQ,CAACC,EAASC,IAAW,CAEnE,OAA8B,gBAAiB,CAC7C,OAAQ,OACR,KAAMF,CAAA,CACP,EACE,KAAM,GAAM,CACP,EAAE,QAAU,UACdC,EAAQ,EAAI,EAEZC,EAAO,EAAE,OAAO,CAAA,CACnB,CACL,CACD,EAEqC,aAAAL,EACxC,CAAC,+dC5BG,MAAMM,EAAQC,EASRC,EAAUC,EAAWF,EAAC,SAG3B,EACKG,EAAOD,EAAYF,EAAA,MAGxB,EAEKI,EAAQV,IAERW,EAAO,IAAM,CACXF,EAAK,OACI,SAAA,KAAK,MAAM,SAAW,SAC/B,WAAW,IAAM,CACJ,SAAA,iBAAiB,QAASG,CAAc,GAClD,GAAG,IAEG,SAAA,KAAK,MAAM,SAAW,GACtB,SAAA,oBAAoB,QAASA,CAAc,EACxD,EAGEC,EAAa,IAAM,CACrBJ,EAAK,MAAQ,GAEbJ,EAAM,SAAS,CAAA,EAGbO,EAAkBE,GAAiB,CACjCL,EAAK,QACLK,EAAM,eAAe,EACrBA,EAAM,gBAAgB,EAEjBJ,EAAM,MAAM,SAASI,EAAM,MAAM,IAClCL,EAAK,MAAQ,GACbJ,EAAM,SAAS,GAEvB,EAGEU,EAAa,IAAM,CACrBV,EAAM,UAAU,CAAA,EAGpB,OAAAW,EAAU,IAAM,CACPL,GAAA,CACR,EAEDM,EAAMR,EAAM,IAAM,CACTE,GAAA,CACR"}