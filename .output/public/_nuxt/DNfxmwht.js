import{_ as B}from"./Bb3kp5CJ.js";import{m as F,r as m,e as V,s as v,p as $,q as L,o as p,j as T,w as g,a as s,b as t,h as e,v as x,c as f,l as S,F as C,x as Z,y as D,z as E,d as M,A as N,t as q}from"./DYYBa1ra.js";import{c as P,b as o,F as l,E as n,a as R}from"./TKIaKC47.js";import{u as j}from"./D7GgLMdG.js";const O=P().shape({billing_street:o().required().label("Street"),billing_address:o().required().label("Address"),billing_city:o().required().label("City"),billing_state:o().required().label("State"),billing_zipcode:o().required().label("Zipcode"),billing_country:o().required().label("Country"),shipping_street:o().required().label("Street"),shipping_address:o().required().label("Address"),shipping_city:o().required().label("City"),shipping_state:o().required().label("State"),shipping_zipcode:o().required().label("Zipcode"),shipping_country:o().required().label("Country")}),z=F("app",()=>{const b=m([]);return{countryList:b,fetchCountry:async()=>{const u=await $fetch("/api/country");b.value=u}}}),U={class:"row"},G={class:"col-6"},H={class:"form__group"},I={class:"col-6"},J={class:"form__group"},K={class:"col-4"},Q={class:"form__group"},W={class:"col-4"},X={class:"form__group"},Y={class:"col-4"},ss={class:"form__group"},is={class:"col-12"},es={class:"form__group"},ts=["value"],os={class:"row"},ls={class:"col-4 text--right"},ns={class:"custom__checkbox"},rs={class:"col-6"},as={class:"form__group"},_s={class:"col-6"},ds={class:"form__group"},ps={class:"col-4"},cs={class:"form__group"},us={class:"col-4"},gs={class:"form__group"},fs={class:"col-4"},ms={class:"form__group"},bs={class:"col-12"},hs={class:"form__group"},ys=["value"],vs={class:"text--right"},zs=V({__name:"CheckoutForm",setup(b){const{countryList:c}=v(z()),{list:u}=v(j()),{fetchCountry:k}=z(),a=m(!1),h=m(!1),y=m(),w=async r=>{h.value=!0,await $fetch("/api/cart/checkout",{method:"POST",body:{...r,cart:u.value}}).then(()=>{u.value=[],N({name:"product"})}).finally(()=>{h.value=!1})};return $(()=>{c.value.length==0&&k()}),L(a,()=>{if(a.value){const r={...y.value.values};y.value.setValues({...r,shipping_street:r.billing_street,shipping_address:r.billing_address,shipping_city:r.billing_city,shipping_state:r.billing_state,shipping_zipcode:r.billing_zipcode,shipping_country:r.billing_country})}}),(r,i)=>{const A=B;return p(),T(e(R),{"validation-schema":e(O),onSubmit:w,class:"form",ref_key:"form",ref:y},{default:g(()=>[s("fieldset",null,[i[8]||(i[8]=s("h3",null,"Billing address",-1)),s("div",U,[s("div",G,[s("div",H,[i[1]||(i[1]=s("label",{for:"cf__billing_street"},"Street",-1)),t(e(l),{name:"billing_street",id:"cf__billing_street",type:"text"}),t(e(n),{name:"billing_street",class:"input--error"})])]),s("div",I,[s("div",J,[i[2]||(i[2]=s("label",{for:"cf__billing_address"},"Address",-1)),t(e(l),{name:"billing_address",id:"cf__billing_address",type:"text"}),t(e(n),{name:"billing_address",class:"input--error"})])]),s("div",K,[s("div",Q,[i[3]||(i[3]=s("label",{for:"cf__billing_city"},"City",-1)),t(e(l),{name:"billing_city",id:"cf__billing_city",type:"text"}),t(e(n),{name:"billing_city",class:"input--error"})])]),s("div",W,[s("div",X,[i[4]||(i[4]=s("label",{for:"cf__billing_state"},"State",-1)),t(e(l),{name:"billing_state",id:"cf__billing_state",type:"text"}),t(e(n),{name:"billing_state",class:"input--error"})])]),s("div",Y,[s("div",ss,[i[5]||(i[5]=s("label",{for:"cf__billing_zipcode"},"Zipcode",-1)),t(e(l),{name:"billing_zipcode",id:"cf__billing_zipcode",type:"text"}),t(e(n),{name:"billing_zipcode",class:"input--error"})])]),s("div",is,[s("div",es,[i[7]||(i[7]=s("label",{for:"cf__billing_country"},"Country",-1)),t(e(l),{name:"billing_country"},{default:g(({field:_})=>[s("select",x(_,{id:"cf__billing_country"}),[i[6]||(i[6]=s("option",{value:""},"Select a country",-1)),(p(!0),f(C,null,S(e(c),d=>(p(),f("option",{value:d.id},q(d.name),9,ts))),256))],16)]),_:1}),t(e(n),{name:"billing_country",class:"input--error"})])])])]),s("fieldset",null,[s("div",os,[i[17]||(i[17]=s("div",{class:"col-8"},[s("h3",null,"Shipping address")],-1)),s("div",ls,[s("label",ns,[Z(s("input",{type:"checkbox","onUpdate:modelValue":i[0]||(i[0]=_=>E(a)?a.value=_:null)},null,512),[[D,e(a)]]),i[9]||(i[9]=s("span",{class:"custom__checkbox__text"},"Same as above",-1))])]),s("div",rs,[s("div",as,[i[10]||(i[10]=s("label",{for:"cf__shipping_street"},"Street",-1)),t(e(l),{name:"shipping_street",id:"cf__shipping_street",type:"text"}),t(e(n),{name:"shipping_street",class:"input--error"})])]),s("div",_s,[s("div",ds,[i[11]||(i[11]=s("label",{for:"cf__shipping_address"},"Address",-1)),t(e(l),{name:"shipping_address",id:"cf__shipping_address",type:"text"}),t(e(n),{name:"shipping_address",class:"input--error"})])]),s("div",ps,[s("div",cs,[i[12]||(i[12]=s("label",{for:"cf__shipping_city"},"City",-1)),t(e(l),{name:"shipping_city",id:"cf__shipping_city",type:"text"}),t(e(n),{name:"shipping_city",class:"input--error"})])]),s("div",us,[s("div",gs,[i[13]||(i[13]=s("label",{for:"cf__shipping_state"},"State",-1)),t(e(l),{name:"shipping_state",id:"cf__shipping_state",type:"text"}),t(e(n),{name:"shipping_state",class:"input--error"})])]),s("div",fs,[s("div",ms,[i[14]||(i[14]=s("label",{for:"cf__shipping_zipcode"},"Zipcode",-1)),t(e(l),{name:"shipping_zipcode",id:"cf__shipping_zipcode",type:"text"}),t(e(n),{name:"shipping_zipcode",class:"input--error"})])]),s("div",bs,[s("div",hs,[i[16]||(i[16]=s("label",{for:"cf__shipping_country"},"Country",-1)),t(e(l),{name:"shipping_country"},{default:g(({field:_})=>[s("select",x(_,{id:"cf__shipping_country"}),[i[15]||(i[15]=s("option",{value:""},"Select a country",-1)),(p(!0),f(C,null,S(e(c),d=>(p(),f("option",{value:d.id},q(d.name),9,ys))),256))],16)]),_:1}),t(e(n),{name:"shipping_country",class:"input--error"})])])])]),s("div",vs,[t(A,{type:"submit",permission:"create_order",loading:e(h)},{default:g(()=>i[18]||(i[18]=[M("Checkout")])),_:1},8,["loading"])])]),_:1},8,["validation-schema"])}}});export{zs as _};
//# sourceMappingURL=DNfxmwht.js.map
