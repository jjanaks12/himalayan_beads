{"version":3,"file":"3F0vnknd.js","sources":["../../../../pages/(account)/login.vue"],"sourcesContent":["<script setup lang=\"ts\">\n    import { Form, Field, ErrorMessage } from 'vee-validate'\n    import { loginSchema } from '~/lib/schema/account.schema'\n\n    definePageMeta({\n        layout: 'simple',\n        middleware: 'auth',\n        auth: {\n            unauthenticatedOnly: true,\n            navigateAuthenticatedTo: '/dashboard'\n        }\n    })\n\n    const router = useRouter()\n    const route = useRoute()\n    const isLoading = ref(false)\n    const { signIn } = useAuth()\n\n    const formSubmit = (values: any) => {\n        isLoading.value = true\n\n        signIn('credentials', {\n            ...values,\n            redirect: false,\n            callbackUrl: '/dashboard'\n        })\n            .then(({ ok }: any) => {\n                console.log(route.query.callbackUrl as string);\n                \n                if (ok)\n                    if (route.query.callbackUrl)\n                        router.push(route.query.callbackUrl as string)\n                    else\n                        router.push('/dashboard')\n            })\n            .finally(() => {\n                isLoading.value = false\n            })\n    }\n</script>\n\n<template>\n    <section class=\"account__section\">\n        <div class=\"account__body\">\n            <Brand />\n            <Form class=\"account__form\" id=\"login-form\" @submit=\"formSubmit\" :validationSchema=\"loginSchema\">\n                <div class=\"account__form__text\">\n                    <h1 class=\"h2\">Login</h1>\n                    <p>Welcome back!!</p>\n                </div>\n                <div class=\"form__group\">\n                    <label for=\"lf__email\">Email</label>\n                    <Field type=\"email\" name=\"email\" id=\"lf__email\" />\n                    <ErrorMessage class=\"input--error\" name=\"email\" />\n                </div>\n                <div class=\"form__group\">\n                    <label for=\"lf__password\">Password</label>\n                    <Field type=\"password\" name=\"password\" id=\"lf__password\" />\n                    <ErrorMessage class=\"input--error\" name=\"password\" />\n                </div>\n                <div class=\"text--right\">\n                    <button type=\"submit\" :class=\"{ 'btn btn__primary': true, 'loading': isLoading }\">Sign in</button>\n                </div>\n            </Form>\n            <div class=\"account__meta\">\n                <p>Has no account? <NuxtLink to=\"/register\">signup</NuxtLink>\n                </p>\n            </div>\n        </div>\n    </section>\n</template>"],"names":["router","useRouter","route","useRoute","isLoading","ref","signIn","useAuth","formSubmit","values","ok"],"mappings":"8dAaI,MAAMA,EAASC,IACTC,EAAQC,IACRC,EAAYC,EAAI,EAAK,EACrB,CAAE,OAAAC,GAAWC,IAEbC,EAAcC,GAAgB,CAChCL,EAAU,MAAQ,GAElBE,EAAO,cAAe,CAClB,GAAGG,EACH,SAAU,GACV,YAAa,YAChB,CAAA,EACI,KAAK,CAAC,CAAE,GAAAC,KAAc,CACX,QAAA,IAAIR,EAAM,MAAM,WAAqB,EAEzCQ,IACIR,EAAM,MAAM,YACLF,EAAA,KAAKE,EAAM,MAAM,WAAqB,EAE7CF,EAAO,KAAK,YAAY,EAAA,CACnC,EACA,QAAQ,IAAM,CACXI,EAAU,MAAQ,EAAA,CACrB,CAAA"}