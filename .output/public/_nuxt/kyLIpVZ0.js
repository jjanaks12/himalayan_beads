import{_ as z}from"./BzOh5FaM.js";import{_ as T}from"./1jKIB_HJ.js";import{L as U,r as v,e as E,s as A,j as B,x as M,o as _,k as H,w as $,a as e,b as u,h as s,m as R,c as g,p as S,F as x,n as j,t as w,l as I,v as O,q as C,d as k,y as F}from"./CB0O_1AF.js";import{i as N}from"./Q5hlEJEC.js";import{f as G}from"./Dg8VEt95.js";import{_ as J}from"./DWRS8aCv.js";import{F as L,E as V,a as K}from"./B4G2sQzk.js";import{a as Q}from"./C-hiDXAY.js";import{u as q,_ as W}from"./CvhTl-oW.js";import{u as X}from"./opYShaiL.js";import"./CfwLjDUh.js";import".prisma/client/index-browser";import"./Cj6dnIpu.js";N.Prisma.validator()({include:{category:!0,prices:!0,images:{include:{images:!0}},stock:!0}});N.Prisma.validator()({include:{images:!0}});const D=U("product",()=>{const b=v([]);return{fetchProduct:async()=>{const n=await $fetch("/api/product");n.status=="success"&&(b.value=n.data)},saveProduct:n=>new Promise((r,l)=>{$fetch("/api/product",{method:"POST",body:n}).then(i=>{i.status=="success"?r(!0):l(i.message)})}),productList:b}}),Y={class:"form__group"},Z={class:"form__group"},ee=["value"],te=["value"],oe={class:"text--right"},se=E({__name:"form",props:{product:{}},emits:["update-form"],setup(b,{emit:h}){const c=b,n=h,{fetchCategory:r}=q(),{categoryList:l}=A(q()),{saveProduct:i}=D(),d=v(),y=v(!1),P=(p,{resetForm:a})=>{y.value=!0,i({...p}).then(()=>{n("update-form"),a()}).finally(()=>{y.value=!1})},t=()=>{var p,a,o,m,f;(p=d.value)==null||p.resetForm(),c.product&&((a=d.value)==null||a.setFieldValue("id",c.product.id),(o=d.value)==null||o.setFieldValue("name",c.product.name),(m=d.value)==null||m.setFieldValue("description",c.product.description||""),(f=d.value)==null||f.setFieldValue("category_id",c.product.category_id||""))};return B(c,()=>{t()},{deep:!0,immediate:!0}),M(()=>{l.value.length==0&&r()}),(p,a)=>(_(),H(s(K),{class:"form","validation-schema":s(Q),onSubmit:P,ref_key:"form",ref:d},{default:$(()=>[e("div",Y,[a[0]||(a[0]=e("label",{for:"pf__name"},"Name",-1)),u(s(L),{type:"text",name:"name",id:"pf__name"}),u(s(V),{name:"name",class:"input--error"})]),e("div",Z,[a[2]||(a[2]=e("label",{for:"cf__category_id"},"Category",-1)),u(s(L),{name:"category_id"},{default:$(({field:o})=>[e("select",R(o,{id:"cf__category_id"}),[a[1]||(a[1]=e("option",{value:""},"Select a parent",-1)),(_(!0),g(x,null,S(s(l),m=>(_(),g(x,null,[e("option",{value:m.id},w(m.name),9,ee),m.predecessor.length>0?(_(!0),g(x,{key:0},S(m.predecessor,f=>(_(),g("option",{value:f.id},"   "+w(f.name),9,te))),256)):I("",!0)],64))),256))],16)]),_:1}),u(s(V),{class:"input--error",name:"category_id"})]),e("div",oe,[e("button",{type:"submit",class:j({"btn btn__primary":!0,loading:s(y)})},"Save",2)])]),_:1},8,["validation-schema"]))}}),ae={class:"datatable__section"},ne={class:"datatable__header"},re={class:"datatable__header__action"},le={class:"datatable__body"},ie={class:"sn"},de={class:"text--center"},ue={class:"text--right"},ce=["onClick"],me=["onClick"],ke=E({__name:"index",setup(b){X({title:"Products :: Himalayan Beads"});const{fetchProduct:h}=D(),{productList:c}=A(D()),n=v(!1),r=v(!1),l=v(null),i=v(null),d=O(()=>i.value!=null),y=()=>{var P;n.value=!0,$fetch(`/api/category/${(P=i.value)==null?void 0:P.id}/`,{method:"DELETE"}).then(()=>{i.value=null,h()}).finally(()=>{n.value=!1})};return B(l,()=>{l.value?r.value=!0:r.value=!1}),M(()=>{h()}),(P,t)=>{const p=z,a=T;return _(),g("section",ae,[e("header",ne,[t[7]||(t[7]=e("div",{class:"datatable__header__holder"},[e("h1",null,"Product")],-1)),e("div",re,[e("a",{class:"btn btn__primary",href:"#",onClick:t[0]||(t[0]=C(o=>r.value=!0,["prevent"]))},t[6]||(t[6]=[e("span",{class:"prepend-icon icon-add"},null,-1),k(" Add Product ")]))])]),t[12]||(t[12]=e("div",{class:"datatable__filter"},[e("form",{action:"#",class:"search__form"})],-1)),e("div",le,[e("table",null,[t[10]||(t[10]=e("thead",null,[e("tr",null,[e("th"),e("th",{class:"text--left"},"Name"),e("th",null,"Created at"),e("th",{class:"text--right"},"Action")])],-1)),e("tbody",null,[(_(!0),g(x,null,S(s(c),(o,m)=>(_(),g("tr",{key:o.id},[e("td",ie,w(m+1),1),e("td",null,[u(J,{product:o},null,8,["product"])]),e("td",de,w(s(G)(o.createdAt)),1),e("td",ue,[e("a",{class:"btn btn--xs btn__info",href:"#",onClick:C(f=>l.value=o,["prevent"])},[u(p,{icon:"mdiPencil",size:"16"}),t[8]||(t[8]=k(" Edit "))],8,ce),e("a",{class:"btn btn--xs btn__danger",href:"#",onClick:C(f=>i.value=o,["prevent"])},[u(p,{icon:"mdiDelete",size:"16"}),t[9]||(t[9]=k(" Delete "))],8,me)])]))),128))])])]),u(a,{show:s(r),"onUpdate:show":t[2]||(t[2]=o=>F(r)?r.value=o:null),"onModal:close":t[3]||(t[3]=o=>l.value=null)},{default:$(()=>[u(se,{product:s(l)||null,onUpdateForm:t[1]||(t[1]=()=>{r.value=!1,s(h)()})},null,8,["product"])]),_:1},8,["show"]),u(W,{title:"Are you sure you want delete?",show:s(d),"onUpdate:show":t[4]||(t[4]=o=>F(d)?d.value=o:null),loading:s(n),"onUpdate:loading":t[5]||(t[5]=o=>F(n)?n.value=o:null),onCancel:()=>{i.value=null},onConfirm:y},{default:$(()=>t[11]||(t[11]=[e("p",null,"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Aliquid quo, explicabo necessitatibus laboriosam a voluptatem hic ratione eius excepturi doloremque quidem odit eaque blanditiis illo obcaecati. Dicta adipisci accusantium quidem.",-1)])),_:1},8,["show","loading","onCancel"])])}}});export{ke as default};
//# sourceMappingURL=kyLIpVZ0.js.map
